<!DOCTYPE html>
<html lang="vi"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/master}">

<head>
    <title>Chi tiแบฟt ฤฦกn hรng</title>
</head>

<body>
<div layout:fragment="content">
    <main class="container">
        <h2>๐งพ Chi tiแบฟt ฤฦกn hรng</h2>

        <p><strong>Mรฃ ฤฦกn hรng:</strong> <span th:text="${order.id}">#123</span></p>
        <p><strong>Ngรy ฤแบทt:</strong> <span th:text="${order.createdAt}">--</span></p>
        <p><strong>Tแปng tiแปn:</strong> <span th:text="${totalPriceFormatted}">0 ฤ</span></p>

        <!-- โ Nแบฟu chฦฐa xรกc nhแบญn, hiแปn thแป checkbox gแปญi POST -->
        <form th:if="${order.status != 'RECEIVED'}"
              method="post"
              th:action="@{'/orders/' + ${order.id} + '/receive'}">
            <label>
                <input type="checkbox" onchange="this.form.submit()"> Tรดi ฤรฃ nhแบญn ฤฦฐแปฃc hรng
            </label>
        </form>

        <!-- โ Nแบฟu ฤรฃ xรกc nhแบญn -->
        <p th:if="${order.status == 'RECEIVED'}" style="color: green; font-weight: bold;">
            โ Cแบฃm ฦกn quรฝ khรกch!
        </p>

        <h3>Sแบฃn phแบฉm trong ฤฦกn:</h3>
        <table>
            <thead>
            <tr>
                <th>Tรชn sแบฃn phแบฉm</th>
                <th>Sแป lฦฐแปฃng</th>
                <th>Thรnh tiแปn</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="item, iterStat : ${items}">
                <td th:text="${item.product.name}">รo</td>
                <td th:text="${item.quantity}">1</td>
                <td th:text="${formattedPrices[iterStat.index]}">200.000 ฤ</td>
            </tr>
            </tbody>
        </table>

        <br>
        <a href="/orders">โฌ Quay lแบกi danh sรกch ฤฦกn hรng</a>
        <div class="text-center mt-4">
            <a href="/support" class="btn btn-outline-primary px-4 py-2">
                ๐ฌ Hแป trแปฃ vแป ฤฦกn hรng
            </a>
        </div>

    </main>
</div>
</body>
</html>