<!DOCTYPE html>
<html lang="vi"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/master}">

<head>
    <meta charset="UTF-8">
    <title>Gi·ªè h√†ng c·ªßa b·∫°n</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/cart.css">

    <th:block layout:fragment="styles">
        <link rel="stylesheet" href="/css/cart.css">
    </th:block>
</head>

<body>
<div layout:fragment="content">
    <main class="container">
        <h2>üõí Gi·ªè h√†ng c·ªßa b·∫°n</h2>

        <!-- ‚úÖ Hi·ªÉn th·ªã th√¥ng b√°o n·∫øu c√≥ -->
        <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

        <table class="cart-table">
            <thead>
            <tr>
                <th>S·∫£n ph·∫©m</th>
                <th>ƒê∆°n gi√°</th>
                <th>S·ªë l∆∞·ª£ng</th>
                <th>Th√†nh ti·ªÅn</th>
                <th>X√≥a</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="item : ${cart.itemList}">
                <td th:text="${item.product.name}">T√™n s·∫£n ph·∫©m</td>
                <td th:text="${#numbers.formatDecimal(item.product.price, 0, 'COMMA', 0, 'POINT')} + ' ƒë'">0 ƒë</td>
                <td th:text="${item.quantity}">1</td>
                <td th:text="${#numbers.formatDecimal(item.product.price * item.quantity, 0, 'COMMA', 0, 'POINT')} + ' ƒë'">0 ƒë</td>
                <td>
                    <form method="post" th:action="@{/cart/remove}">
                        <input type="hidden" name="productId" th:value="${item.product.id}" />
                        <button type="submit" class="btn btn-danger">‚ùå</button>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>

        <div class="cart-total">
            <strong>T·ªïng c·ªông:</strong>
            <span th:text="${#numbers.formatDecimal(cart.totalPrice, 0, 'COMMA', 0, 'POINT')} + ' ƒë'">0 ƒë</span>
        </div>

        <div class="cart-actions">
            <a href="/shop" class="btn btn-secondary">Ti·∫øp t·ª•c mua s·∫Øm</a>
            <a href="/checkout" class="btn btn-primary">Thanh to√°n</a>
        </div>
    </main>
</div>

<th:block layout:fragment="scripts">
    <script src="/js/cart.js"></script>
</th:block>
</body>
</html>
